# Render Blueprint - TravelPath Backend
# Deploy: Connect GitHub repo and Render will auto-detect this file

services:
  - type: web
    name: travelpath-backend
    runtime: docker
    dockerfilePath: ./Dockerfile.production
    dockerContext: .
    plan: free  # Use 'starter' ($7/month) for production
    
    # Health check endpoint
    healthCheckPath: /health
    
    # Environment variables (secrets set in Dashboard)
    envVars:
      # Required: Set these in Render Dashboard as secrets!
      - key: FIREBASE_CREDENTIALS_JSON
        sync: false
      - key: MAPS_API_KEY
        sync: false
      
      # S3-compatible storage (Cloudflare R2, AWS S3, etc.)
      - key: MINIO_ENDPOINT
        sync: false
      - key: MINIO_ROOT_USER
        sync: false
      - key: MINIO_ROOT_PASSWORD
        sync: false
      - key: MINIO_BUCKET_NAME
        value: travel-photos
      - key: MINIO_USE_SSL
        value: "true"
      - key: MINIO_REGION
        value: auto
      
      # Python unbuffered output for logs
      - key: PYTHONUNBUFFERED
        value: "1"

# Note: gRPC requires Private Services or external proxy.
# REST API at /photos/upload is available for photo uploads.

